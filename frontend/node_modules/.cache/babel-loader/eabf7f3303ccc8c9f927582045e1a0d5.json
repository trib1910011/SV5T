{"ast":null,"code":"// import axios from \"axios\";\n// import config from \"../config/index\";\n// import store from \"../store/index\";\nconst guardRouter = function (router) {\n  let stop = false;\n  router.beforeEach(async (to, form, next) => {\n    const rule = localStorage.getItem(\"rule\"); // Not login then redirect to login\n\n    if (!rule && to.fullPath != \"/login\") {\n      next(\"/login\");\n    } // Logedin then redirect to home\n    else if (rule && to.fullPath == \"/login\") {\n      if (rule == \"ADMIN\") next(\"/admin/home\");else if (rule == \"COMPANY\") next(\"/company/home\");else if (rule == \"STUDENT\") next(\"/student/home\");else if (rule == \"MINISTRY\") next(\"/ministry/home\");else if (rule == \"TEACHER\") next(\"/teacher/home\");\n    } else {\n      // if accessing the site is not authorized. will be blocked\n      const uri = rule || \"/none\";\n\n      if (!to.fullPath.includes(`/${uri.toLowerCase()}`) && !stop) {\n        stop = true;\n        next(\"/error\");\n      } // All good\n      else next();\n    }\n  });\n};\n\nexport default guardRouter;","map":{"version":3,"names":["guardRouter","router","stop","beforeEach","to","form","next","rule","localStorage","getItem","fullPath","uri","includes","toLowerCase"],"sources":["/Users/thiencao/Desktop/untitled folder/internship-management/frontend/src/router/guard-router.js"],"sourcesContent":["// import axios from \"axios\";\r\n// import config from \"../config/index\";\r\n// import store from \"../store/index\";\r\nconst guardRouter = function (router) {\r\n    let stop = false;\r\n\r\n\r\n    router.beforeEach(async (to, form, next) => {\r\n        const rule = localStorage.getItem(\"rule\");\r\n\r\n        // Not login then redirect to login\r\n        if (!rule && to.fullPath != \"/login\") {\r\n            next(\"/login\");\r\n        }\r\n\r\n        // Logedin then redirect to home\r\n        else if (rule && to.fullPath == \"/login\") {\r\n            if (rule == \"ADMIN\") next(\"/admin/home\");\r\n            else if (rule == \"COMPANY\") next(\"/company/home\");\r\n            else if (rule == \"STUDENT\") next(\"/student/home\");\r\n            else if (rule == \"MINISTRY\") next(\"/ministry/home\");\r\n            else if (rule == \"TEACHER\") next(\"/teacher/home\");\r\n        } else {\r\n            // if accessing the site is not authorized. will be blocked\r\n            const uri = rule || \"/none\";\r\n            if (!to.fullPath.includes(`/${uri.toLowerCase()}`) && !stop) {\r\n                stop = true;\r\n                next(\"/error\");\r\n            }\r\n\r\n            // All good\r\n            else next();\r\n        }\r\n    });\r\n};\r\n\r\nexport default guardRouter;\r\n"],"mappings":"AAAA;AACA;AACA;AACA,MAAMA,WAAW,GAAG,UAAUC,MAAV,EAAkB;EAClC,IAAIC,IAAI,GAAG,KAAX;EAGAD,MAAM,CAACE,UAAP,CAAkB,OAAOC,EAAP,EAAWC,IAAX,EAAiBC,IAAjB,KAA0B;IACxC,MAAMC,IAAI,GAAGC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAb,CADwC,CAGxC;;IACA,IAAI,CAACF,IAAD,IAASH,EAAE,CAACM,QAAH,IAAe,QAA5B,EAAsC;MAClCJ,IAAI,CAAC,QAAD,CAAJ;IACH,CAFD,CAIA;IAJA,KAKK,IAAIC,IAAI,IAAIH,EAAE,CAACM,QAAH,IAAe,QAA3B,EAAqC;MACtC,IAAIH,IAAI,IAAI,OAAZ,EAAqBD,IAAI,CAAC,aAAD,CAAJ,CAArB,KACK,IAAIC,IAAI,IAAI,SAAZ,EAAuBD,IAAI,CAAC,eAAD,CAAJ,CAAvB,KACA,IAAIC,IAAI,IAAI,SAAZ,EAAuBD,IAAI,CAAC,eAAD,CAAJ,CAAvB,KACA,IAAIC,IAAI,IAAI,UAAZ,EAAwBD,IAAI,CAAC,gBAAD,CAAJ,CAAxB,KACA,IAAIC,IAAI,IAAI,SAAZ,EAAuBD,IAAI,CAAC,eAAD,CAAJ;IAC/B,CANI,MAME;MACH;MACA,MAAMK,GAAG,GAAGJ,IAAI,IAAI,OAApB;;MACA,IAAI,CAACH,EAAE,CAACM,QAAH,CAAYE,QAAZ,CAAsB,IAAGD,GAAG,CAACE,WAAJ,EAAkB,EAA3C,CAAD,IAAkD,CAACX,IAAvD,EAA6D;QACzDA,IAAI,GAAG,IAAP;QACAI,IAAI,CAAC,QAAD,CAAJ;MACH,CAHD,CAKA;MALA,KAMKA,IAAI;IACZ;EACJ,CA1BD;AA2BH,CA/BD;;AAiCA,eAAeN,WAAf"},"metadata":{},"sourceType":"module"}