{"ast":null,"code":"import { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, createBlock as _createBlock, createCommentVNode as _createCommentVNode, withCtx as _withCtx, createVNode as _createVNode, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"students-register row p-4 animate__fadeIn animate__animated\"\n};\n\nconst _hoisted_2 = /*#__PURE__*/_createStaticVNode(\"<div class=\\\"col-12\\\"><div class=\\\"d-flex\\\"><h2 class=\\\"header-list label m-0 p-2 pt-4 fw-bold col-6\\\" style=\\\"color:#555555;\\\"> Sinh viên đăng ký <div class=\\\"line my-3\\\"></div></h2><h2 class=\\\"header-list label m-0 p-2 pt-4 fw-bold col-6\\\" style=\\\"color:#555555;\\\"> Thông tin chi tiết <div class=\\\"line my-3\\\"></div></h2></div></div>\", 1);\n\nconst _hoisted_3 = {\n  class: \"accordion col-6\",\n  style: {\n    \"height\": \"500px\",\n    \"overflow-y\": \"scroll\"\n  }\n};\nconst _hoisted_4 = {\n  class: \"col-6\"\n};\n\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"button\", {\n  type: \"button\",\n  class: \"btn btn-secondary\",\n  \"data-bs-dismiss\": \"modal\"\n}, \" Đóng \", -1\n/* HOISTED */\n);\n\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"button\", {\n  type: \"button\",\n  class: \"btn btn-secondary\",\n  \"data-bs-dismiss\": \"modal\"\n}, \" Đóng \", -1\n/* HOISTED */\n);\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_ItemStudent = _resolveComponent(\"ItemStudent\");\n\n  const _component_InformationDetail = _resolveComponent(\"InformationDetail\");\n\n  const _component_Statistics = _resolveComponent(\"Statistics\");\n\n  const _component_Modal = _resolveComponent(\"Modal\");\n\n  return _openBlock(), _createElementBlock(\"div\", null, [_createElementVNode(\"div\", _hoisted_1, [_hoisted_2, _createElementVNode(\"div\", _hoisted_3, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.studentList, (student, index) => {\n    return _openBlock(), _createBlock(_component_ItemStudent, {\n      key: index,\n      class: \"mb-2\",\n      student: student,\n      index: index\n    }, null, 8\n    /* PROPS */\n    , [\"student\", \"index\"]);\n  }), 128\n  /* KEYED_FRAGMENT */\n  ))]), _createElementVNode(\"div\", _hoisted_4, [_ctx.isShowDetail ? (_openBlock(), _createBlock(_component_InformationDetail, {\n    key: 0\n  })) : (_openBlock(), _createBlock(_component_Statistics, {\n    key: 1\n  }))])]), _createVNode(_component_Modal, {\n    id: \"ModalRefuse\",\n    message: \"Bạn có chắc muốn xóa ứng viên này?\"\n  }, {\n    default: _withCtx(() => [_hoisted_5, _createElementVNode(\"button\", {\n      type: \"button\",\n      class: \"btn btn-primary\",\n      \"data-bs-dismiss\": \"modal\",\n      onClick: _cache[0] || (_cache[0] = $event => $options.handleRefuse(_ctx.student.id))\n    }, \" Xác nhận \")]),\n    _: 1\n    /* STABLE */\n\n  }), _createVNode(_component_Modal, {\n    id: \"ModalAccept\",\n    message: \"Bạn có chắc muốn xác nhận ứng viên này?\"\n  }, {\n    default: _withCtx(() => [_hoisted_6, _createElementVNode(\"button\", {\n      type: \"button\",\n      class: \"btn btn-primary\",\n      \"data-bs-dismiss\": \"modal\",\n      onClick: _cache[1] || (_cache[1] = $event => $options.handleConfirm(_ctx.student.id))\n    }, \" Xác nhận \")]),\n    _: 1\n    /* STABLE */\n\n  })]);\n}","map":{"version":3,"mappings":";;EAGYA,KAAK,EAAC;;;;;;EAqBFA,KAAK,EAAC;EACNC,KAAyC,EAAzC;IAAA;IAAA;EAAA;;;EAUCD,KAAK,EAAC;;;gCAMVE,oBAMQ,QANR,EAMQ;EALLC,IAAI,EAAC,QAKA;EAJLH,KAAK,EAAC,mBAID;EAHL,mBAAgB;AAGX,CANR,EAIA,QAJA,EAMD;AAAA;AANC;;gCAqBAE,oBAMQ,QANR,EAMQ;EALLC,IAAI,EAAC,QAKA;EAJLH,KAAK,EAAC,mBAID;EAHL,mBAAgB;AAGX,CANR,EAIA,QAJA,EAMD;AAAA;AANC;;;;;;;;;;;uBA7DTI,oBA6EM,KA7EN,EA6EM,IA7EN,EA6EM,CA5EFF,oBAqCM,KArCN,cAqCM,CAlCFG,UAkCE,EAhBFH,oBAWM,KAXN,cAWM,oBAPFE,oBAMEE,SANF,EAME,IANF,EAMEC,YAL6BC,gBAK7B,EALwC,CAA9BC,OAA8B,EAArBC,KAAqB,KAAhB;yBAD1BC,aAMEC,sBANF,EAME;MAJGC,GAAG,EAAEH,KAIR;MAHEV,KAAK,EAAC,MAGR;MAFGS,OAAO,EAAEA,OAEZ;MADGC,KAAK,EAAEA;IACV,CANF;;IAAA;GAME,CANF;;EAAA,CAOE,EAXN,CAgBE,EAJFR,oBAGM,KAHN,cAGM,CAFuBM,mCAAzBG,aAAyCG,4BAAzC,EAAyC;IAAAD;EAAA,CAAzC,oBACAF,aAAqBI,qBAArB,EAAqB;IAAAF;EAAA,CAArB,EACE,CAHN,CAIE,CArCN,CA4EE,EAtCFG,aAiBQC,gBAjBR,EAiBQ;IAjBDC,EAAE,EAAC,aAiBF;IAjBgBC,OAAO,EAAC;EAiBxB,CAjBR;sBACK,MAMQ,CANRC,UAMQ,EAETlB,oBAOS,QAPT,EAOS;MANLC,IAAI,EAAC,QAMA;MALLH,KAAK,EAAC,iBAKD;MAJL,mBAAgB,OAIX;MAHJqB,OAAK,sCAAEC,sBAAad,aAAQU,EAArB,CAAF;IAGD,CAPT,EAKC,YALD,CAFS;;;;GAPb,CAsCE,EAnBFF,aAkBQC,gBAlBR,EAkBQ;IAjBJC,EAAE,EAAC,aAiBC;IAhBJC,OAAO,EAAC;EAgBJ,CAlBR;sBAGK,MAMQ,CANRI,UAMQ,EACTrB,oBAOS,QAPT,EAOS;MANLC,IAAI,EAAC,QAMA;MALLH,KAAK,EAAC,iBAKD;MAJL,mBAAgB,OAIX;MAHJqB,OAAK,sCAAEC,uBAAcd,aAAQU,EAAtB,CAAF;IAGD,CAPT,EAKC,YALD,CADS;;;;GATb,CAmBE,CA7EN","names":["class","style","_createElementVNode","type","_createElementBlock","_hoisted_2","_Fragment","_renderList","_ctx","student","index","_createBlock","_component_ItemStudent","key","_component_InformationDetail","_component_Statistics","_createVNode","_component_Modal","id","message","_hoisted_5","onClick","$options","_hoisted_6"],"sourceRoot":"","sources":["D:\\KTPM\\Final_NienLuan\\internship-management\\frontend\\src\\views\\company\\StudentsRegister.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <div\r\n            class=\"students-register row p-4 animate__fadeIn animate__animated\"\r\n        >\r\n            <div class=\"col-12\">\r\n                <div class=\"d-flex\">\r\n                    <h2\r\n                        class=\"header-list label m-0 p-2 pt-4 fw-bold col-6\"\r\n                        style=\"color: #555555\"\r\n                    >\r\n                        Sinh viên đăng ký\r\n                        <div class=\"line my-3\"></div>\r\n                    </h2>\r\n                    <h2\r\n                        class=\"header-list label m-0 p-2 pt-4 fw-bold col-6\"\r\n                        style=\"color: #555555\"\r\n                    >\r\n                        Thông tin chi tiết\r\n                        <div class=\"line my-3\"></div>\r\n                    </h2>\r\n                </div>\r\n            </div>\r\n            <div\r\n                class=\"accordion col-6\"\r\n                style=\"height: 500px; overflow-y: scroll\"\r\n            >\r\n                <ItemStudent\r\n                    v-for=\"(student, index) in studentList\"\r\n                    :key=\"index\"\r\n                    class=\"mb-2\"\r\n                    :student=\"student\"\r\n                    :index=\"index\"\r\n                />\r\n            </div>\r\n            <div class=\"col-6\">\r\n                <InformationDetail v-if=\"isShowDetail\" />\r\n                <Statistics v-else />\r\n            </div>\r\n        </div>\r\n        <Modal id=\"ModalRefuse\" message=\"Bạn có chắc muốn xóa ứng viên này?\"\r\n            ><button\r\n                type=\"button\"\r\n                class=\"btn btn-secondary\"\r\n                data-bs-dismiss=\"modal\"\r\n            >\r\n                Đóng\r\n            </button>\r\n\r\n            <button\r\n                type=\"button\"\r\n                class=\"btn btn-primary\"\r\n                data-bs-dismiss=\"modal\"\r\n                @click=\"handleRefuse(student.id)\"\r\n            >\r\n                Xác nhận\r\n            </button>\r\n        </Modal>\r\n\r\n        <Modal\r\n            id=\"ModalAccept\"\r\n            message=\"Bạn có chắc muốn xác nhận ứng viên này?\"\r\n            ><button\r\n                type=\"button\"\r\n                class=\"btn btn-secondary\"\r\n                data-bs-dismiss=\"modal\"\r\n            >\r\n                Đóng\r\n            </button>\r\n            <button\r\n                type=\"button\"\r\n                class=\"btn btn-primary\"\r\n                data-bs-dismiss=\"modal\"\r\n                @click=\"handleConfirm(student.id)\"\r\n            >\r\n                Xác nhận\r\n            </button>\r\n        </Modal>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport config from \"@/config/index.js\";\r\nimport ItemStudent from \"../../components/Company/StudentsRegister/ItemStudent.vue\";\r\nimport InformationDetail from \"../../components/Company/StudentsRegister/InformationDetail.vue\";\r\nimport Statistics from \"../../components/Company/StudentsRegister/Statistics.vue\";\r\nimport Modal from \"@/components/Modal/Modal.vue\";\r\n\r\nimport { mapActions, mapGetters } from \"vuex\";\r\nexport default {\r\n    name: \"StudentsRegister\",\r\n    components: { ItemStudent, InformationDetail, Statistics, Modal },\r\n    computed: mapGetters({\r\n        isShowDetail: \"getShowDetail\",\r\n        studentList: \"getStudentList\",\r\n        account: \"getAccount\",\r\n        student: \"getStudentDetail\",\r\n    }),\r\n    methods: {\r\n        ...mapActions([\"setAccount\"]),\r\n        async handleRefuse(studentId) {\r\n            try {\r\n                const toast = await this.handleDeleteStudent(studentId);\r\n\r\n                this.$store.dispatch(\"setToast\", {\r\n                    isSuccess: toast.status,\r\n                    message: toast.message,\r\n                });\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n        },\r\n        async handleConfirm(studentId) {\r\n            const token = localStorage.getItem(\"token\");\r\n            try {\r\n                const res = await axios.post(\r\n                    `${config.domain}/company/confirm/`,\r\n                    { studentId, companyId: this.account.id },\r\n                    {\r\n                        headers: { Authorization: \"Bearer \" + token },\r\n                    }\r\n                );\r\n\r\n                await this.handleRefuse(studentId);\r\n\r\n                if (res.data.status) {\r\n                    this.$store.dispatch(\"setToast\", {\r\n                        isSuccess: res.data.status,\r\n                        message: res.data.message,\r\n                    });\r\n                }\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n        },\r\n        async handleDeleteStudent(studentId) {\r\n            const token = localStorage.getItem(\"token\");\r\n            try {\r\n                const res = await axios.delete(\r\n                    `${config.domain}/company/refuse-register/`,\r\n                    {\r\n                        headers: { Authorization: \"Bearer \" + token },\r\n\r\n                        data: {\r\n                            studentId,\r\n                            companyId: this.account.id,\r\n                        },\r\n                    }\r\n                );\r\n\r\n                if (res.data.status) {\r\n                    this.$store.commit(\"DELETE_STUDENT\", this.student.id);\r\n                }\r\n\r\n                return { status: res.data.status, message: res.data.message };\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n        },\r\n    },\r\n    async created() {\r\n        const token = localStorage.getItem(\"token\");\r\n        await this.setAccount();\r\n\r\n        const res = await axios.get(\r\n            `${config.domain}/company/get-students-register/`,\r\n            {\r\n                params: {\r\n                    companyId: this.account.id,\r\n                },\r\n                headers: { Authorization: \"Bearer \" + token },\r\n            }\r\n        );\r\n        this.$store.commit(\"SET_STUDENT_LIST\", res.data.result);\r\n    },\r\n};\r\n</script>\r\n\r\n<style>\r\n.line {\r\n    border-bottom: 3px solid #1c57a5;\r\n    width: 100px;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}