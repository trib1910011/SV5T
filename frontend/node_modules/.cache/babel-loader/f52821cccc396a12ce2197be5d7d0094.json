{"ast":null,"code":"import axios from \"axios\";\nimport config from \"@/config/index.js\";\nimport TitleStructure from \"../../components/GlobalComponent/TitleStructure.vue\";\nimport CreateSpell from \"../../components/Ministry/ManageSpell/CreateSpell.vue\";\nimport EditSpell from \"@/components/Ministry/ManageSpell/EditSpell.vue\";\nexport default {\n  name: \"SpellManage\",\n  components: {\n    TitleStructure,\n    CreateSpell,\n    EditSpell\n  },\n\n  data() {\n    return {\n      spell: [],\n      spellUpdate: {}\n    };\n  },\n\n  created() {\n    this.showSpell();\n  },\n\n  methods: {\n    async showSpell() {\n      const data = await axios.get(\"http://localhost:3000/spell/get-all-spell\");\n      const arr_data = data.data.findSpell;\n      const arr_result = arr_data.map((item, index) => {\n        return {\n          id: item._id,\n          stt: index + 1,\n          spellname: item.spellname,\n          name: item.name,\n          start: item.start,\n          end: item.end,\n          status: item.status ? 'Bắt đầu' : 'Kết thúc'\n        };\n      });\n      this.spell = arr_result;\n    },\n\n    async handleupdateStatus(id_input, status_input) {\n      let status_get = false;\n\n      if (status_input === 'Bắt đầu') {\n        status_get = true;\n      }\n\n      try {\n        const check_update = await axios.patch(`http://localhost:3000/spell/updateOneSpell/${id_input}`, {\n          status: !status_get\n        });\n\n        if (check_update) {\n          this.$store.commit(\"SET_TOAST\", {\n            message: res.data.message,\n            isSuccess: res.data.status\n          });\n          this.showSpell();\n        } else {\n          alert('Chuyển đổi trạng thái thất bại');\n        }\n      } catch (e) {\n        console.log(e);\n      }\n    },\n\n    async handleDeleteSpell(spellId) {\n      const res = await axios.delete(`${config.domain}/spell/delete-spell`, {\n        data: {\n          spellId\n        }\n      });\n      this.$store.commit(\"SET_TOAST\", {\n        message: res.data.message,\n        isSuccess: res.data.status\n      });\n\n      if (res.data.status) {\n        this.$store.commit(\"DELETE_SPELL_CURRENT\", spellId);\n        this.showSpell();\n      }\n    },\n\n    handleSetUpdate(spell) {\n      this.$store.commit(\"SET_SPELL_UPDATE\", spell);\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAsEA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,OAAOC,cAAP,MAA2B,qDAA3B;AACA,OAAOC,WAAP,MAAwB,uDAAxB;AACA,OAAOC,SAAP,MAAsB,iDAAtB;AAGA,eAAe;EACXC,IAAI,EAAE,aADK;EAEXC,UAAU,EAAE;IAAEJ,cAAF;IAAkBC,WAAlB;IAA+BC;EAA/B,CAFD;;EAGXG,IAAI,GAAG;IACH,OAAO;MACHC,KAAK,EAAE,EADJ;MAEHC,WAAW,EAAE;IAFV,CAAP;EAIH,CARU;;EASXC,OAAO,GAAG;IACN,KAAKC,SAAL;EACH,CAXU;;EAYXC,OAAO,EAAE;IACL,MAAMD,SAAN,GAAkB;MACd,MAAMJ,IAAG,GAAI,MAAMP,KAAK,CAACa,GAAN,CAAU,2CAAV,CAAnB;MAEA,MAAMC,QAAO,GAAIP,IAAI,CAACA,IAAL,CAAUQ,SAA3B;MAEA,MAAMC,UAAS,GAAIF,QAAQ,CAACG,GAAT,CAAa,CAACC,IAAD,EAAOC,KAAP,KAAiB;QAE7C,OAAO;UACHC,EAAE,EAAEF,IAAI,CAACG,GADN;UAEHC,GAAG,EAAEH,KAAI,GAAI,CAFV;UAGHI,SAAS,EAAEL,IAAI,CAACK,SAHb;UAIHlB,IAAI,EAAEa,IAAI,CAACb,IAJR;UAKHmB,KAAK,EAAEN,IAAI,CAACM,KALT;UAMHC,GAAG,EAAEP,IAAI,CAACO,GANP;UAOHC,MAAM,EAAER,IAAI,CAACQ,MAAL,GAAc,SAAd,GAA0B;QAP/B,CAAP;MAWH,CAbkB,CAAnB;MAeA,KAAKlB,KAAL,GAAaQ,UAAb;IAEH,CAvBI;;IAwBL,MAAMW,kBAAN,CAAyBC,QAAzB,EAAmCC,YAAnC,EAAiD;MAC7C,IAAIC,UAAS,GAAI,KAAjB;;MACA,IAAID,YAAW,KAAM,SAArB,EAAgC;QAC5BC,UAAS,GAAI,IAAb;MACJ;;MACA,IAAI;QACA,MAAMC,YAAW,GAAI,MAAM/B,KAAK,CAACgC,KAAN,CAAa,8CAA6CJ,QAAS,EAAnE,EAAsE;UAAEF,MAAM,EAAE,CAACI;QAAX,CAAtE,CAA3B;;QACA,IAAIC,YAAJ,EAAkB;UACd,KAAKE,MAAL,CAAYC,MAAZ,CAAmB,WAAnB,EAAgC;YACpCC,OAAO,EAAEC,GAAG,CAAC7B,IAAJ,CAAS4B,OADkB;YAEpCE,SAAS,EAAED,GAAG,CAAC7B,IAAJ,CAASmB;UAFgB,CAAhC;UAIA,KAAKf,SAAL;QACJ,CANA,MAMO;UACH2B,KAAK,CAAC,gCAAD,CAAL;QACJ;MACJ,CAXA,CAWE,OAAOC,CAAP,EAAU;QACRC,OAAO,CAACC,GAAR,CAAYF,CAAZ;MACJ;IAEH,CA5CI;;IA6CL,MAAMG,iBAAN,CAAwBC,OAAxB,EAAiC;MAC7B,MAAMP,GAAE,GAAI,MAAMpC,KAAK,CAAC4C,MAAN,CACb,GAAE3C,MAAM,CAAC4C,MAAO,qBADH,EAEd;QAEItC,IAAI,EAAE;UACFoC;QADE;MAFV,CAFc,CAAlB;MAUA,KAAKV,MAAL,CAAYC,MAAZ,CAAmB,WAAnB,EAAgC;QAC5BC,OAAO,EAAEC,GAAG,CAAC7B,IAAJ,CAAS4B,OADU;QAE5BE,SAAS,EAAED,GAAG,CAAC7B,IAAJ,CAASmB;MAFQ,CAAhC;;MAKA,IAAIU,GAAG,CAAC7B,IAAJ,CAASmB,MAAb,EAAqB;QACjB,KAAKO,MAAL,CAAYC,MAAZ,CAAmB,sBAAnB,EAA2CS,OAA3C;QACA,KAAKhC,SAAL;MACJ;IACH,CAjEI;;IAkELmC,eAAe,CAACtC,KAAD,EAAQ;MACnB,KAAKyB,MAAL,CAAYC,MAAZ,CAAmB,kBAAnB,EAAuC1B,KAAvC;IACH;;EApEI;AAZE,CAAf","names":["axios","config","TitleStructure","CreateSpell","EditSpell","name","components","data","spell","spellUpdate","created","showSpell","methods","get","arr_data","findSpell","arr_result","map","item","index","id","_id","stt","spellname","start","end","status","handleupdateStatus","id_input","status_input","status_get","check_update","patch","$store","commit","message","res","isSuccess","alert","e","console","log","handleDeleteSpell","spellId","delete","domain","handleSetUpdate"],"sourceRoot":"","sources":["D:\\SV5T\\frontend\\src\\views\\ministry\\SpellManage.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <div class=\"admin-manage animate__animated animate__fadeIn\">\r\n            <TitleStructure :title=\"`Danh sách đợt đăng ký sinh viên 5 tốt`\"></TitleStructure>\r\n            <div class=\"list-account mt-5 table-wrapper-scroll-y my-custom-scrollbar\">\r\n                <table class=\"table table-striped\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th class=\"text-center\" scope=\"col\">#</th>\r\n                            <th class=\"text-center\" scope=\"col\">Mã đợt</th>\r\n                            <th class=\"text-center\" scope=\"col\">\r\n                                Tên đợt\r\n                            </th>\r\n                            <th class=\"text-center\" scope=\"col\">Ngày bắt đầu </th>\r\n                            <th class=\"text-center\" scope=\"col\">\r\n                                Ngày kết thúc\r\n                            </th>\r\n                            <th class=\"text-center\" scope=\"col\">\r\n                                Trạng thái\r\n                            </th>\r\n                            <th class=\"text-center\" scope=\"col\">\r\n                                Thao tác\r\n                            </th>\r\n                            <th class=\"text-center\" scope=\"col\">\r\n                                Tùy chọn\r\n                            </th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr v-for=\"(item, index) in spell\" :key=\"index\">\r\n                            <th class=\"text-center\" scope=\"row\">\r\n                                {{ item.stt }}\r\n                            </th>\r\n                            <td class=\"text-center\">{{ item.spellname }}</td>\r\n                            <td class=\"text-center\">{{ item.name }}</td>\r\n                            <td class=\"text-center\">{{ item.start }}</td>\r\n                            <td class=\"text-center\">{{ item.end }}</td>\r\n                            <td class=\"text-center\">{{ item.status }}</td>\r\n                            <td class=\"text-center\">\r\n                                <button type=\"button\" class=\"btn\" data-bs-toggle=\"modal\" data-bs-target=\"#editInforSpellStatus\"\r\n                                    @click=\"handleupdateStatus(item.id, item.status)\">\r\n                                    <i class=\"bi bi-arrow-left-right text-warning fs-5\"> </i>\r\n                                </button>\r\n\r\n                            </td>\r\n                            <td class=\"text-center\">\r\n                                <button type=\"button\" class=\"btn\" data-bs-toggle=\"modal\" data-bs-target=\"#editInforSpell\"\r\n                                    @click=\"handleSetUpdate(item)\">\r\n                                    <i class=\"bi bi-pencil-square text-warning fs-5\"></i>\r\n                                </button>\r\n                                <button type=\"button\" class=\"btn\" @click=\"handleDeleteSpell(item.id)\">\r\n                                    <i class=\"bi bi-archive-fill text-danger fs-5\"></i>\r\n                                </button>\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n        <div class=\"d-flex justify-content-center mt-3\">\r\n            <button type=\"button\" class=\"btn btn-success\" data-bs-toggle=\"modal\" data-bs-target=\"#createSpell\">\r\n                <i class=\"bi bi-plus-circle-fill\"></i> &nbsp; Thêm đợt\r\n            </button>\r\n        </div>\r\n        <CreateSpell></CreateSpell>\r\n        <EditSpell></EditSpell>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport config from \"@/config/index.js\";\r\nimport TitleStructure from \"../../components/GlobalComponent/TitleStructure.vue\";\r\nimport CreateSpell from \"../../components/Ministry/ManageSpell/CreateSpell.vue\";\r\nimport EditSpell from \"@/components/Ministry/ManageSpell/EditSpell.vue\";\r\n\r\n\r\nexport default {\r\n    name: \"SpellManage\",\r\n    components: { TitleStructure, CreateSpell, EditSpell },\r\n    data() {\r\n        return {\r\n            spell: [],\r\n            spellUpdate: {},\r\n        };\r\n    },\r\n    created() {\r\n        this.showSpell()\r\n    },\r\n    methods: {\r\n        async showSpell() {\r\n            const data = await axios.get(\"http://localhost:3000/spell/get-all-spell\")\r\n\r\n            const arr_data = data.data.findSpell;\r\n\r\n            const arr_result = arr_data.map((item, index) => {\r\n\r\n                return {\r\n                    id: item._id,\r\n                    stt: index + 1,\r\n                    spellname: item.spellname,\r\n                    name: item.name,\r\n                    start: item.start,\r\n                    end: item.end,\r\n                    status: item.status ? 'Bắt đầu' : 'Kết thúc'\r\n                }\r\n\r\n\r\n            })\r\n\r\n            this.spell = arr_result;\r\n\r\n        },\r\n        async handleupdateStatus(id_input, status_input) {\r\n            let status_get = false\r\n            if (status_input === 'Bắt đầu') {\r\n                status_get = true\r\n            }\r\n            try {\r\n                const check_update = await axios.patch(`http://localhost:3000/spell/updateOneSpell/${id_input}`, { status: !status_get })\r\n                if (check_update) {\r\n                    this.$store.commit(\"SET_TOAST\", {\r\n                message: res.data.message,\r\n                isSuccess: res.data.status,\r\n            });\r\n                    this.showSpell()\r\n                } else {\r\n                    alert('Chuyển đổi trạng thái thất bại')\r\n                }\r\n            } catch (e) {\r\n                console.log(e)\r\n            }\r\n\r\n        },\r\n        async handleDeleteSpell(spellId) {\r\n            const res = await axios.delete(\r\n                `${config.domain}/spell/delete-spell`,\r\n                {\r\n\r\n                    data: {\r\n                        spellId,\r\n                    },\r\n                }\r\n            );\r\n\r\n            this.$store.commit(\"SET_TOAST\", {\r\n                message: res.data.message,\r\n                isSuccess: res.data.status,\r\n            });\r\n\r\n            if (res.data.status) {\r\n                this.$store.commit(\"DELETE_SPELL_CURRENT\", spellId);\r\n                this.showSpell()\r\n            }\r\n        },\r\n        handleSetUpdate(spell) {\r\n            this.$store.commit(\"SET_SPELL_UPDATE\", spell);\r\n        },\r\n\r\n    }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.type__item {\r\n    padding: 5px 10px;\r\n    font-size: 16px;\r\n    cursor: pointer;\r\n    border-bottom: 2px solid rgba(64, 68, 162, 0.25);\r\n}\r\n\r\n.type__item.active {\r\n    transition: border-bottom 0.5s linear;\r\n    border-bottom-color: #2f2fe6;\r\n}\r\n\r\n.my-custom-scrollbar {\r\n    position: relative;\r\n    height: 400px;\r\n    overflow: auto;\r\n}\r\n\r\n.table-wrapper-scroll-y {\r\n    display: block;\r\n}\r\n</style>\r\n                        \r\n"]},"metadata":{},"sourceType":"module"}