{"ast":null,"code":"import axios from \"axios\";\nimport config from \"@/config/index.js\";\nimport TitleStructure from \"../../components/GlobalComponent/TitleStructure.vue\";\nimport CreateCategory from \"../../components/Ministry/ManageForm/CreateCategory.vue\";\nexport default {\n  name: \"CategoryManage\",\n  components: {\n    TitleStructure,\n    CreateCategory,\n    E\n  },\n\n  data() {\n    return {\n      category: []\n    };\n  },\n\n  created() {\n    this.showCategory();\n  },\n\n  methods: {\n    async showCategory() {\n      const token = localStorage.getItem(\"token\");\n      const data = await axios.get(\"http://localhost:3000/ministry/get-all-category\", {\n        headers: {\n          Authorization: \"Bearer \" + token\n        }\n      });\n      const arr_data = data.data.findCategory;\n      const arr_result = arr_data.map((item, index) => {\n        return {\n          id: item._id,\n          stt: index + 1,\n          categoryCode: item.categoryCode,\n          categoryName: item.categoryName\n        };\n      });\n      this.category = arr_result;\n    },\n\n    async handleDeleteCategory(categoryId) {\n      const token = localStorage.getItem(\"token\");\n      const res = await axios.delete(`${config.domain}/ministry/delete-category`, {\n        headers: {\n          Authorization: \"Bearer \" + token\n        },\n        data: {\n          categoryId\n        }\n      });\n      this.$store.commit(\"SET_TOAST\", {\n        message: res.data.message,\n        isSuccess: res.data.status\n      });\n\n      if (res.data.status) {\n        this.$store.commit(\"DELETE_CATEGORY_CURRENT\", categoryId);\n        this.showCategory();\n      }\n    },\n\n    handleSetUpdate(category) {\n      this.$store.commit(\"SET_SPELL_UPDATE\", category);\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAmDA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,OAAOC,cAAP,MAA2B,qDAA3B;AACA,OAAOC,cAAP,MAA2B,yDAA3B;AAEA,eAAe;EACXC,IAAI,EAAE,gBADK;EAEXC,UAAU,EAAE;IAAEH,cAAF;IAAkBC,cAAlB;IAAkCG;EAAlC,CAFD;;EAGXC,IAAI,GAAG;IACH,OAAO;MACHC,QAAQ,EAAE;IADP,CAAP;EAGH,CAPU;;EAQXC,OAAO,GAAG;IACN,KAAKC,YAAL;EACH,CAVU;;EAWXC,OAAO,EAAE;IACL,MAAMD,YAAN,GAAqB;MACjB,MAAME,KAAI,GAAIC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;MACA,MAAMP,IAAG,GAAI,MAAMP,KAAK,CAACe,GAAN,CAAU,iDAAV,EACf;QACIC,OAAO,EAAE;UACLC,aAAa,EAAE,YAAYL;QADtB;MADb,CADe,CAAnB;MASA,MAAMM,QAAO,GAAIX,IAAI,CAACA,IAAL,CAAUY,YAA3B;MAEA,MAAMC,UAAS,GAAIF,QAAQ,CAACG,GAAT,CAAa,CAACC,IAAD,EAAOC,KAAP,KAAiB;QAE7C,OAAO;UACHC,EAAE,EAAEF,IAAI,CAACG,GADN;UAEHC,GAAG,EAAEH,KAAI,GAAI,CAFV;UAGHI,YAAY,EAAEL,IAAI,CAACK,YAHhB;UAIHC,YAAY,EAAEN,IAAI,CAACM;QAJhB,CAAP;MAQH,CAVkB,CAAnB;MAWA,KAAKpB,QAAL,GAAgBY,UAAhB;IAEH,CA3BI;;IA4BL,MAAMS,oBAAN,CAA2BC,UAA3B,EAAuC;MACnC,MAAMlB,KAAI,GAAIC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;MACA,MAAMiB,GAAE,GAAI,MAAM/B,KAAK,CAACgC,MAAN,CACb,GAAE/B,MAAM,CAACgC,MAAO,2BADH,EAEd;QACIjB,OAAO,EAAE;UAAEC,aAAa,EAAE,YAAYL;QAA7B,CADb;QAGIL,IAAI,EAAE;UACFuB;QADE;MAHV,CAFc,CAAlB;MAaA,KAAKI,MAAL,CAAYC,MAAZ,CAAmB,WAAnB,EAAgC;QAC5BC,OAAO,EAAEL,GAAG,CAACxB,IAAJ,CAAS6B,OADU;QAE5BC,SAAS,EAAEN,GAAG,CAACxB,IAAJ,CAAS+B;MAFQ,CAAhC;;MAKA,IAAIP,GAAG,CAACxB,IAAJ,CAAS+B,MAAb,EAAqB;QACjB,KAAKJ,MAAL,CAAYC,MAAZ,CAAmB,yBAAnB,EAA8CL,UAA9C;QACA,KAAKpB,YAAL;MACJ;IACH,CApDI;;IAqDL6B,eAAe,CAAC/B,QAAD,EAAW;MACtB,KAAK0B,MAAL,CAAYC,MAAZ,CAAmB,kBAAnB,EAAuC3B,QAAvC;IACH;;EAvDI;AAXE,CAAf","names":["axios","config","TitleStructure","CreateCategory","name","components","E","data","category","created","showCategory","methods","token","localStorage","getItem","get","headers","Authorization","arr_data","findCategory","arr_result","map","item","index","id","_id","stt","categoryCode","categoryName","handleDeleteCategory","categoryId","res","delete","domain","$store","commit","message","isSuccess","status","handleSetUpdate"],"sourceRoot":"","sources":["D:\\SV5T\\frontend\\src\\views\\ministry\\CategoryManage.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <div class=\"animate__animated animate__fadeIn\">\r\n            <TitleStructure :title=\"`Quản lý loại tiêu chí`\"></TitleStructure>\r\n            <div class=\"mt-5 table-wrapper-scroll-y my-custom-scrollbar\">\r\n                <table class=\"table table-striped\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th class=\"text-center\" scope=\"col\">#</th>\r\n                            <th class=\"text-center\" scope=\"col\">Mã loại</th>\r\n                            <th class=\"text-center\" scope=\"col\">\r\n                                Tên loại tiêu chí\r\n                            </th>\r\n                            <th class=\"text-center\" scope=\"col\">\r\n                                Tùy chọn\r\n                            </th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr v-for=\"(item, index) in category\" :key=\"index\">\r\n                            <th class=\"text-center\" scope=\"row\">\r\n                                {{ item.stt }}\r\n                            </th>\r\n                            <td class=\"text-center\">{{ item.categoryCode }}</td>\r\n                            <td class=\"text-center\">{{ item.categoryName }}</td>\r\n                            <td class=\"text-center\">\r\n                                <button type=\"button\" class=\"btn\" data-bs-toggle=\"modal\" data-bs-target=\"#editInforCategory\">\r\n                                    <i class=\"bi bi-pencil-square text-warning fs-5\" \r\n                                    @click=\"handleSetUpdate(item)\"></i>\r\n                                </button>\r\n                                <button type=\"button\" class=\"btn\">\r\n                                    <i class=\"bi bi-archive-fill text-danger fs-5\"\r\n                                        @click=\"handleDeleteCategory(item.id)\"></i>\r\n                                </button>\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n        <div class=\"d-flex justify-content-center mt-3\">\r\n            <button type=\"button\" class=\"btn btn-success mb-3\" data-bs-toggle=\"modal\" data-bs-target=\"#createCategory\">\r\n                <i class=\"bi bi-plus-circle-fill\"></i> &nbsp; Thêm loại tiêu chí\r\n            </button>\r\n        </div>\r\n    </div>\r\n    <CreateCategory></CreateCategory>\r\n    <EditSpell></EditSpell>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport config from \"@/config/index.js\";\r\nimport TitleStructure from \"../../components/GlobalComponent/TitleStructure.vue\";\r\nimport CreateCategory from \"../../components/Ministry/ManageForm/CreateCategory.vue\"\r\n\r\nexport default {\r\n    name: \"CategoryManage\",\r\n    components: { TitleStructure, CreateCategory, E },\r\n    data() {\r\n        return {\r\n            category: [],\r\n        };\r\n    },\r\n    created() {\r\n        this.showCategory()\r\n    },\r\n    methods: {\r\n        async showCategory() {\r\n            const token = localStorage.getItem(\"token\");\r\n            const data = await axios.get(\"http://localhost:3000/ministry/get-all-category\",\r\n                {\r\n                    headers: {\r\n                        Authorization: \"Bearer \" + token,\r\n                    },\r\n                }\r\n            )\r\n\r\n\r\n            const arr_data = data.data.findCategory;\r\n\r\n            const arr_result = arr_data.map((item, index) => {\r\n\r\n                return {\r\n                    id: item._id,\r\n                    stt: index + 1,\r\n                    categoryCode: item.categoryCode,\r\n                    categoryName: item.categoryName,\r\n                }\r\n\r\n\r\n            })\r\n            this.category = arr_result;\r\n\r\n        },\r\n        async handleDeleteCategory(categoryId) {\r\n            const token = localStorage.getItem(\"token\");\r\n            const res = await axios.delete(\r\n                `${config.domain}/ministry/delete-category`,\r\n                {\r\n                    headers: { Authorization: \"Bearer \" + token },\r\n\r\n                    data: {\r\n                        categoryId,\r\n                    },\r\n                }\r\n\r\n\r\n            );\r\n\r\n            this.$store.commit(\"SET_TOAST\", {\r\n                message: res.data.message,\r\n                isSuccess: res.data.status,\r\n            });\r\n\r\n            if (res.data.status) {\r\n                this.$store.commit(\"DELETE_CATEGORY_CURRENT\", categoryId);\r\n                this.showCategory()\r\n            }\r\n        },\r\n        handleSetUpdate(category) {\r\n            this.$store.commit(\"SET_SPELL_UPDATE\", category);\r\n        },\r\n    }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.type__item {\r\n    padding: 5px 10px;\r\n    font-size: 16px;\r\n    cursor: pointer;\r\n    border-bottom: 2px solid rgba(64, 68, 162, 0.25);\r\n}\r\n\r\n.type__item.active {\r\n    transition: border-bottom 0.5s linear;\r\n    border-bottom-color: #2f2fe6;\r\n}\r\n\r\n.my-custom-scrollbar {\r\n    position: relative;\r\n    height: 400px;\r\n    overflow: auto;\r\n}\r\n\r\n.table-wrapper-scroll-y {\r\n    display: block;\r\n}\r\n</style>\r\n                        \r\n"]},"metadata":{},"sourceType":"module"}