{"ast":null,"code":"import axios from \"axios\";\nimport config from \"@/config/index.js\";\nimport TitleStructure from \"../../components/GlobalComponent/TitleStructure.vue\";\nimport CreateStandard from \"@/components/Ministry/ManageForm/CreateStandard.vue\";\nimport { mapGetters } from \"vuex\";\nexport default {\n  name: \"StandardManage\",\n  components: {\n    TitleStructure,\n    CreateStandard\n  },\n\n  data() {\n    return {\n      standard: [],\n      standardUpdate: {},\n      categories: [],\n      click: 'Đạo đức tốt'\n    };\n  },\n\n  computed: mapGetters({\n    accountCurrent: \"getStandardCurrent\"\n  }),\n\n  mounted() {\n    document.querySelectorAll(\".type__item\")[0].classList.add(\"active\");\n    const typeItems = document.querySelectorAll(\".type__item\");\n    [...typeItems].forEach(function (typeItem) {\n      typeItem.addEventListener(\"click\", handleBorderItem);\n    });\n\n    function handleBorderItem(event) {\n      [...typeItems].forEach(typeItem => {\n        typeItem.classList.remove(\"active\");\n      });\n      event.target.classList.add(\"active\");\n    }\n  },\n\n  created() {\n    this.showStandard(), this.getCategory();\n  },\n\n  methods: {\n    async showStandard() {\n      const token = localStorage.getItem(\"token\");\n      const data = await axios.get(\"http://localhost:3000/ministry/get-all-standard\", {\n        headers: {\n          Authorization: \"Bearer \" + token\n        }\n      });\n      const arr_data = data.data.findStandard;\n      const arr_result = arr_data.map((item, index) => {\n        return {\n          id: item._id,\n          stt: index + 1,\n          codeStandard: item.codeStandard,\n          categoryName: item.categoryName,\n          contentStandard: item.contentStandard,\n          status: item.status ? 'Hiện' : 'Ẩn'\n        };\n      });\n      this.standard = arr_result;\n    },\n\n    async handleupdateStatus(id_input, status_input) {\n      let status_get = false;\n\n      if (status_input === 'Hiện') {\n        status_get = true;\n      }\n\n      try {\n        const token = localStorage.getItem(\"token\");\n        const check_update = await axios.patch(`http://localhost:3000/ministry/updateOneStandard/${id_input}`, {\n          status: !status_get\n        }, {\n          headers: {\n            Authorization: \"Bearer \" + token\n          }\n        });\n\n        if (check_update) {\n          this.$store.commit(\"SET_TOAST\", {\n            message: check_update.data.message,\n            isSuccess: check_update.data.status\n          });\n          this.showStandard();\n        }\n      } catch (e) {\n        console.log(e);\n      }\n    },\n\n    async handleDeleteCategory(categoryId) {\n      const token = localStorage.getItem(\"token\");\n      const res = await axios.delete(`${config.domain}/ministry/delete-category`, {\n        headers: {\n          Authorization: \"Bearer \" + token\n        },\n        data: {\n          categoryId\n        }\n      });\n      this.$store.commit(\"SET_TOAST\", {\n        message: res.data.message,\n        isSuccess: res.data.status\n      });\n\n      if (res.data.status) {\n        this.$store.commit(\"DELETE_CATEGORY_CURRENT\", categoryId);\n        this.showCategory();\n      }\n    },\n\n    handleSetUpdate(category) {\n      this.$store.commit(\"SET_CATEGORY_UPDATE\", category);\n    },\n\n    async getCategory() {\n      const token = localStorage.getItem(\"token\");\n      const data = await axios.get(\"http://localhost:3000/ministry/get-all-categories\", {\n        headers: {\n          Authorization: \"Bearer \" + token\n        }\n      });\n      const arr_data = data.data.categories;\n      const arr_result = arr_data.map(item => {\n        return {\n          categoryName: item.categoryName\n        };\n      });\n      this.categories = arr_result;\n    },\n\n    handleFilter(event) {\n      const filter = event.target.innerText;\n      this.click = filter; // console.log(event.target.categoryName)\n\n      if (filter == \"categoryName\") {\n        this.$store.commit(\"SET_STANDARD_CURRENT\", this.standards.filter(standard => standard.categoryName));\n        this.showStandard();\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["axios","config","TitleStructure","CreateStandard","mapGetters","name","components","data","standard","standardUpdate","categories","click","computed","accountCurrent","mounted","document","querySelectorAll","classList","add","typeItems","forEach","typeItem","addEventListener","handleBorderItem","event","remove","target","created","showStandard","getCategory","methods","token","localStorage","getItem","get","headers","Authorization","arr_data","findStandard","arr_result","map","item","index","id","_id","stt","codeStandard","categoryName","contentStandard","status","handleupdateStatus","id_input","status_input","status_get","check_update","patch","$store","commit","message","isSuccess","e","console","log","handleDeleteCategory","categoryId","res","delete","domain","showCategory","handleSetUpdate","category","handleFilter","filter","innerText","standards"],"sourceRoot":"","sources":["D:\\SV5T\\frontend\\src\\views\\ministry\\StandardManage.vue"],"sourcesContent":["<template>\r\n    <div class=\"animate__animated animate__fadeIn\">\r\n        <TitleStructure :title=\"`Quản lý tiêu chí`\"></TitleStructure>\r\n        <div class=\"type-account col-12 d-flex justify-content-center\">\r\n            <!-- <div class=\"type__item\">Tất cả</div> -->\r\n            <div v-for=\"(item) in categories\" :key=\"item\" class=\"type__item\" @click=\"handleFilter($event)\">\r\n                {{ item.categoryName }}\r\n            </div>\r\n        </div>\r\n        <div class=\"mt-5 table-wrapper-scroll-y my-custom-scrollbar\">\r\n            <table class=\"table table-striped\">\r\n                <thead>\r\n                    <th class=\"text-center\">#</th>\r\n                    <th class=\"text-center\">Mã</th>\r\n                    <th class=\"text-center\">\r\n                        Thuộc tiêu chí\r\n                    </th>\r\n                    <th class=\"text-center\" style=\"width: 50%;\">\r\n                        Nội dung tiêu chí\r\n                    </th>\r\n                    <th class=\"text-center\">\r\n                        Trạng thái\r\n                    </th>\r\n                    <th class=\"text-center\">\r\n                        Thao tác\r\n                    </th>\r\n                    <th class=\"text-center\">\r\n                        Tùy chọn\r\n                    </th>\r\n\r\n                </thead>\r\n                <tbody>\r\n                    <tr v-for=\"(item, index) in standard\" :key=\"index\">\r\n                        <template v-if=\"item.categoryName == this.click\">\r\n                            <td class=\"text-center\" scope=\"row\">\r\n                                {{ item.stt }}\r\n                            </td>\r\n\r\n                            <td class=\"text-center\">{{ item.codeStandard }}</td>\r\n                            <td class=\"text-center\">{{ item.categoryName }}</td>\r\n                            <td class=\"text-center\">{{ item.contentStandard }}</td>\r\n                            <td class=\"text-center\">{{ item.status }}</td>\r\n                            <td class=\"text-center\">\r\n                                <button type=\"button\" class=\"btn\" data-bs-toggle=\"modal\"\r\n                                    data-bs-target=\"#editInforStandardStatus\"\r\n                                    @click=\"handleupdateStatus(item.id, item.status)\">\r\n                                    <i class=\"bi bi-arrow-left-right text-warning fs-5\"> </i>\r\n                                </button>\r\n\r\n                            </td>\r\n                            <td class=\"text-center\">\r\n                                <button type=\"button\" class=\"btn\" data-bs-toggle=\"modal\"\r\n                                    data-bs-target=\"#editInforCategory\">\r\n                                    <i class=\"bi bi-pencil-square text-warning fs-5\"></i>\r\n                                </button>\r\n                                <button type=\"button\" class=\"btn\">\r\n                                    <i class=\"bi bi-archive-fill text-danger fs-5\"></i>\r\n                                </button>\r\n                            </td>\r\n                        </template>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <div class=\"d-flex justify-content-center mt-3\">\r\n            <button type=\"button\" class=\"btn btn-success mb-3\" data-bs-toggle=\"modal\" data-bs-target=\"#createStandard\">\r\n                <i class=\"bi bi-plus-circle-fill\"></i> &nbsp; Thêm chi tiết tiêu chí\r\n            </button>\r\n        </div>\r\n    </div>\r\n    <CreateStandard></CreateStandard>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport config from \"@/config/index.js\";\r\nimport TitleStructure from \"../../components/GlobalComponent/TitleStructure.vue\";\r\nimport CreateStandard from \"@/components/Ministry/ManageForm/CreateStandard.vue\";\r\nimport { mapGetters } from \"vuex\";\r\n\r\nexport default {\r\n    name: \"StandardManage\",\r\n    components: { TitleStructure, CreateStandard },\r\n    data() {\r\n        return {\r\n            standard: [],\r\n            standardUpdate: {},\r\n            categories: [],\r\n            click: 'Đạo đức tốt',\r\n        };\r\n    },\r\n    computed: mapGetters({ accountCurrent: \"getStandardCurrent\" }),\r\n    mounted() {\r\n        document.querySelectorAll(\".type__item\")[0].classList.add(\"active\");\r\n\r\n        const typeItems = document.querySelectorAll(\".type__item\");\r\n\r\n        [...typeItems].forEach(function (typeItem) {\r\n            typeItem.addEventListener(\"click\", handleBorderItem);\r\n        });\r\n\r\n        function handleBorderItem(event) {\r\n            [...typeItems].forEach((typeItem) => {\r\n                typeItem.classList.remove(\"active\");\r\n            });\r\n            event.target.classList.add(\"active\");\r\n        }\r\n    },\r\n    created() {\r\n        this.showStandard(),\r\n            this.getCategory()\r\n    },\r\n    methods: {\r\n        async showStandard() {\r\n            const token = localStorage.getItem(\"token\");\r\n            const data = await axios.get(\"http://localhost:3000/ministry/get-all-standard\",\r\n                {\r\n                    headers: {\r\n                        Authorization: \"Bearer \" + token,\r\n                    },\r\n                }\r\n            )\r\n\r\n\r\n            const arr_data = data.data.findStandard;\r\n\r\n            const arr_result = arr_data.map((item, index) => {\r\n\r\n                return {\r\n                    id: item._id,\r\n                    stt: index + 1,\r\n                    codeStandard: item.codeStandard,\r\n                    categoryName: item.categoryName,\r\n                    contentStandard: item.contentStandard,\r\n                    status: item.status ? 'Hiện' : 'Ẩn'\r\n                }\r\n\r\n            })\r\n            this.standard = arr_result;\r\n\r\n        },\r\n        async handleupdateStatus(id_input, status_input) {\r\n            let status_get = false\r\n            if (status_input === 'Hiện') {\r\n                status_get = true\r\n            }\r\n            try {\r\n                const token = localStorage.getItem(\"token\");\r\n                const check_update = await axios.patch(`http://localhost:3000/ministry/updateOneStandard/${id_input}`,\r\n                    {\r\n                        status: !status_get\r\n                    },\r\n                    {\r\n                        headers: { Authorization: \"Bearer \" + token },\r\n\r\n                    },\r\n                )\r\n\r\n                if (check_update) {\r\n                    this.$store.commit(\"SET_TOAST\", {\r\n                        message: check_update.data.message,\r\n                        isSuccess: check_update.data.status,\r\n                    });\r\n                    this.showStandard()\r\n                }\r\n            } catch (e) {\r\n                console.log(e)\r\n            }\r\n\r\n        },\r\n        async handleDeleteCategory(categoryId) {\r\n            const token = localStorage.getItem(\"token\");\r\n            const res = await axios.delete(\r\n                `${config.domain}/ministry/delete-category`,\r\n                {\r\n                    headers: { Authorization: \"Bearer \" + token },\r\n\r\n                    data: {\r\n                        categoryId,\r\n                    },\r\n                }\r\n\r\n\r\n            );\r\n\r\n            this.$store.commit(\"SET_TOAST\", {\r\n                message: res.data.message,\r\n                isSuccess: res.data.status,\r\n            });\r\n\r\n            if (res.data.status) {\r\n                this.$store.commit(\"DELETE_CATEGORY_CURRENT\", categoryId);\r\n                this.showCategory()\r\n            }\r\n        },\r\n        handleSetUpdate(category) {\r\n            this.$store.commit(\"SET_CATEGORY_UPDATE\", category);\r\n        },\r\n        async getCategory() {\r\n            const token = localStorage.getItem(\"token\");\r\n            const data = await axios.get(\"http://localhost:3000/ministry/get-all-categories\",\r\n                {\r\n                    headers: {\r\n                        Authorization: \"Bearer \" + token,\r\n                    },\r\n                }\r\n            )\r\n            const arr_data = data.data.categories;\r\n\r\n            const arr_result = arr_data.map((item) => {\r\n\r\n                return {\r\n                    categoryName: item.categoryName\r\n                }\r\n\r\n\r\n            })\r\n\r\n            this.categories = arr_result;\r\n\r\n        },\r\n        handleFilter(event) {\r\n\r\n            const filter = event.target.innerText;\r\n            this.click = filter\r\n            // console.log(event.target.categoryName)\r\n            if (filter == \"categoryName\") {\r\n                this.$store.commit(\r\n                    \"SET_STANDARD_CURRENT\",\r\n                    this.standards.filter((standard) => standard.categoryName),\r\n                );\r\n\r\n                this.showStandard()\r\n            }\r\n        },\r\n    }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.type__item {\r\n    padding: 5px 10px;\r\n    font-size: 16px;\r\n    cursor: pointer;\r\n    border-bottom: 2px solid rgba(64, 68, 162, 0.25);\r\n}\r\n\r\n.type__item.active {\r\n    transition: border-bottom 0.5s linear;\r\n    border-bottom-color: #2f2fe6;\r\n}\r\n\r\n.my-custom-scrollbar {\r\n    position: relative;\r\n    height: 400px;\r\n    overflow: auto;\r\n}\r\n\r\n.table-wrapper-scroll-y {\r\n    display: block;\r\n}\r\n</style>\r\n                        \r\n"]},"metadata":{},"sourceType":"module"}